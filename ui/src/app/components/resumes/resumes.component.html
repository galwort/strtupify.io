<div *ngIf="displayedEmployee" class="resume-container">
  <div class="resume-header">
    <div class="avatar" [class.fallback]="!currentAvatarUrl">
      <img
        *ngIf="currentAvatarUrl"
        [src]="currentAvatarUrl"
        [alt]="displayedEmployee.name + ' avatar'"
      />
      <span *ngIf="!currentAvatarUrl" class="material-symbols-outlined">person</span>
    </div>
    <div class="identity">
      <h1>{{ displayedEmployee.name }}</h1>
      <div class="subline">
        <h2>{{ displayedEmployee.title }}</h2>
      </div>
    </div>
  </div>
  <p>{{ displayedEmployee.personality }}</p>
  <ul>
    <li *ngFor="let skill of displayedEmployeeSkills">
      <span class="skill-name">{{ skill.skill }}</span>
      <div class="progress-bar">
        <div
          class="progress-fill"
          [style.width.%]="(skill.level / 10) * 100"
          [ngClass]="{ 'full-skill': skill.level === 10 }"
        ></div>
      </div>
    </li>
  </ul>
  <h3>
    Salary: {{
      displayedEmployee.salary | currency : "USD" : "symbol" : "1.0-0"
    }}
  </h3>
  <div class="button-container">
    <button class="hire-button" (click)="hireEmployee()" [disabled]="autoHiring">Hire</button>
    <button (click)="prevResume()" [disabled]="currentIndex === 0 || autoHiring">
      Previous
    </button>
    <button
      (click)="nextResume()"
      [disabled]="currentIndex === employees.length - 1 || autoHiring"
    >
      Next
    </button>
  </div>
  <div class="bottom-container">
    <div class="bottom-bar">
      <div class="roles">
        <div
          class="role"
          *ngFor="let role of visibleRoles"
          [class.clickable]="roleSelectionEnabled"
          (click)="selectRole(role.title)"
        >
          {{ role.title }} ({{ role.openings }})
        </div>
      </div>
      <button
        class="auto-hire-button"
        (click)="automateHiring()"
        [disabled]="
          autoHiring || !rolesWithOpenings.length || !employees.length
        "
      >
        {{
          autoHiring ? "Automating Hiring..." : "Automate Hiring Powered by AI"
        }}
      </button>
    </div>
  </div>
</div>
